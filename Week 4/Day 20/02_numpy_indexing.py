# 02_numpy_indexing.py - Индексация и срезы

import numpy as np

print("="*60)
print("ИНДЕКСАЦИЯ И СРЕЗЫ В NumPy")
print("="*60)

# ==========================================
# 1D МАССИВЫ - ИНДЕКСАЦИЯ
# ==========================================

print("\n1. Индексация 1D массивов:")

arr = np.array([10, 20, 30, 40, 50])
print(f"Массив: {arr}")

# По индексу
print(f"\narr[0] = {arr[0]}")  # Первый элемент
print(f"arr[2] = {arr[2]}")    # Третий элемент
print(f"arr[-1] = {arr[-1]}")  # Последний
print(f"arr[-2] = {arr[-2]}")  # Предпоследний

# Изменение элемента
arr[0] = 100
print(f"\nПосле arr[0] = 100: {arr}")

# ==========================================
# 1D МАССИВЫ - СРЕЗЫ
# ==========================================

print("\n" + "="*60)
print("2. Срезы 1D массивов:")
print("="*60)

arr = np.array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
print(f"Массив: {arr}")

# [start:stop:step]
print(f"\narr[2:5] = {arr[2:5]}")      # индексы 2, 3, 4
print(f"arr[:5] = {arr[:5]}")          # с начала до 5
print(f"arr[5:] = {arr[5:]}")          # с 5 до конца
print(f"arr[::2] = {arr[::2]}")        # каждый второй
print(f"arr[1::2] = {arr[1::2]}")      # каждый второй начиная с 1
print(f"arr[::-1] = {arr[::-1]}")      # в обратном порядке

# ==========================================
# 2D МАССИВЫ - ИНДЕКСАЦИЯ
# ==========================================

print("\n" + "="*60)
print("3. Индексация 2D массивов:")
print("="*60)

arr2d = np.array([[1, 2, 3, 4],
                  [5, 6, 7, 8],
                  [9, 10, 11, 12]])

print(f"Массив:\n{arr2d}\n")

# [строка, столбец]
print(f"arr2d[0, 0] = {arr2d[0, 0]}")  # 1
print(f"arr2d[0, 2] = {arr2d[0, 2]}")  # 3
print(f"arr2d[1, 3] = {arr2d[1, 3]}")  # 8
print(f"arr2d[2, 1] = {arr2d[2, 1]}")  # 10

# Целая строка
print(f"\narr2d[0] = {arr2d[0]}")      # [1, 2, 3, 4]
print(f"arr2d[1] = {arr2d[1]}")        # [5, 6, 7, 8]

# Целый столбец
print(f"\narr2d[:, 0] = {arr2d[:, 0]}")  # [1, 5, 9]
print(f"arr2d[:, 2] = {arr2d[:, 2]}")    # [3, 7, 11]
"""
[:, 0] означает:
: - все строки
0 - нулевой столбец
"""

# ==========================================
# 2D МАССИВЫ - СРЕЗЫ
# ==========================================

print("\n" + "="*60)
print("4. Срезы 2D массивов:")
print("="*60)

print(f"Массив:\n{arr2d}\n")

# Срез строк и столбцов
print(f"Первые 2 строки:\n{arr2d[:2]}\n")
print(f"Последние 2 строки:\n{arr2d[-2:]}\n")
print(f"Первые 2 столбца:\n{arr2d[:, :2]}\n")
print(f"Подматрица [0:2, 1:3]:\n{arr2d[0:2, 1:3]}\n")
"""
arr2d[0:2, 1:3]:
строки 0, 1
столбцы 1, 2

[[2, 3],
 [6, 7]]
"""

# ==========================================
# БУЛЕВА ИНДЕКСАЦИЯ
# ==========================================

print("\n" + "="*60)
print("5. Булева индексация:")
print("="*60)

arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
print(f"Массив: {arr}")

# Создать маску
mask = arr > 5
print(f"\nМаска (arr > 5): {mask}")
"""
mask = [False, False, False, False, False, True, True, True, True, True]
"""

# Использовать маску
filtered = arr[mask]
print(f"arr[mask]: {filtered}")
"""
Выбирает только элементы где True
[6, 7, 8, 9, 10]
"""

# Компактная запись
print(f"\narr[arr > 5] = {arr[arr > 5]}")
print(f"arr[arr % 2 == 0] = {arr[arr % 2 == 0]}")  # чётные
print(f"arr[(arr > 3) & (arr < 8)] = {arr[(arr > 3) & (arr < 8)]}")
"""
& - логическое И (and)
| - логическое ИЛИ (or)
~ - логическое НЕ (not)
"""

# ==========================================
# FANCY ИНДЕКСАЦИЯ
# ==========================================

print("\n" + "="*60)
print("6. Fancy индексация (массивами):")
print("="*60)

arr = np.array([10, 20, 30, 40, 50, 60, 70, 80])
print(f"Массив: {arr}")

# Индексация списком индексов
indices = [0, 2, 4]
print(f"\narr[[0, 2, 4]] = {arr[indices]}")  # [10, 30, 50]

# Для 2D
arr2d = np.array([[1, 2, 3],
                  [4, 5, 6],
                  [7, 8, 9]])

print(f"\n2D массив:\n{arr2d}")
print(f"\narr2d[[0, 2]] (строки 0, 2):\n{arr2d[[0, 2]]}")
print(f"\narr2d[[0, 1], [1, 2]] = {arr2d[[0, 1], [1, 2]]}")
"""
arr2d[[0, 1], [1, 2]]:
Выбрать:
- arr2d[0, 1] = 2
- arr2d[1, 2] = 6
Результат: [2, 6]
"""

# ==========================================
# ИЗМЕНЕНИЕ ЧЕРЕЗ ИНДЕКСАЦИЮ
# ==========================================

print("\n" + "="*60)
print("7. Изменение через индексацию:")
print("="*60)

arr = np.array([1, 2, 3, 4, 5])
print(f"Исходный: {arr}")

# Изменить один элемент
arr[0] = 100
print(f"После arr[0] = 100: {arr}")

# Изменить срез
arr[1:3] = [200, 300]
print(f"После arr[1:3] = [200, 300]: {arr}")

# Изменить через маску
arr[arr > 100] = 0
print(f"После arr[arr > 100] = 0: {arr}")

print("\n" + "="*60)
print("ИТОГИ:")
print("="*60)
print("""
Индексация:
- arr[i] - элемент по индексу
- arr[i, j] - элемент 2D массива
- arr[-1] - последний элемент

Срезы:
- arr[start:stop:step]
- arr[:, i] - столбец
- arr[i, :] - строка

Булева индексация:
- arr[arr > 5] - фильтрация
- arr[(condition1) & (condition2)]

Fancy индексация:
- arr[[0, 2, 4]] - выбор по индексам
""")